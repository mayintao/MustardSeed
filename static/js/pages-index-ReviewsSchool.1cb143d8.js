(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-index-ReviewsSchool"],{"02bb":function(e,t,a){"use strict";a.r(t);var i=a("1d29"),n=a("c61a");for(var o in n)["default"].indexOf(o)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(o);a("eecb");var s=a("828b"),r=Object(s["a"])(n["default"],i["b"],i["c"],!1,null,"12e2a01a",null,!1,i["a"],void 0);t["default"]=r.exports},"1d29":function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"c",(function(){return o})),a.d(t,"a",(function(){return i}));var i={uIcon:a("7b6b").default},n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-uni-view",{staticClass:"container"},[a("v-uni-view",{staticClass:"page-title"},[e._v(" 学校评分 ")]),a("v-uni-view",{staticClass:"review-tips"},[a("u-icon",{attrs:{name:"info-circle",size:"30",color:"#2979ff"}}),a("v-uni-view",{staticClass:"tips-text"},[a("v-uni-text",{staticClass:"tips-title"},[e._v("请基于真实体验进行评分")]),a("v-uni-text",{staticClass:"tips-desc"},[e._v(" 为了帮助更多家长做出合适选择，请尽量从客观、公正、真实的角度评价学校。 每位用户只能对一所学校评价一次，多次评价会覆盖之前评价。 ")])],1)],1),e._l(e.ratingList,(function(t){return a("v-uni-view",{key:t.key,staticClass:"review-card"},[a("v-uni-view",{staticClass:"review-header"},[a("v-uni-text",{staticClass:"review-title"},[e._v(e._s(t.label))]),a("v-uni-text",{staticClass:"review-score"},[e._v(e._s(t.score)+"/5")])],1),a("v-uni-view",{staticClass:"score-row"},e._l(5,(function(i){return a("v-uni-view",{key:i,staticClass:"score-dot",class:{active:i<=t.score},on:{click:function(a){arguments[0]=a=e.$handleEvent(a),e.setScore(t.key,i)}}},[e._v(" "+e._s(i)+" ")])})),1)],1)})),a("v-uni-view",{staticClass:"submit-area"},[a("v-uni-button",{staticClass:"submit-btn",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.submitReview.apply(void 0,arguments)}}},[e._v(" 提交评分 ")])],1)],2)},o=[]},"3fb3":function(e,t,a){var i=a("c86c");t=i(!1),t.push([e.i,".container[data-v-12e2a01a]{padding:%?24?%;background:#f7f9fc;min-height:100vh}.page-title[data-v-12e2a01a]{font-size:%?34?%;font-weight:600;color:#333;text-align:center;margin-bottom:%?24?%}.review-tips[data-v-12e2a01a]{display:flex;align-items:flex-start;background:#f0f5ff;border-left:%?6?% solid #2979ff;border-radius:%?12?%;padding:%?20?%;margin-bottom:%?24?%}.tips-text[data-v-12e2a01a]{margin-left:%?16?%}.tips-title[data-v-12e2a01a]{display:block;font-size:%?26?%;font-weight:600;color:#333;margin-bottom:%?6?%}.tips-desc[data-v-12e2a01a]{font-size:%?24?%;color:#555;line-height:1.5}.review-card[data-v-12e2a01a]{background:#fff;border-radius:%?16?%;padding:%?24?%;margin-bottom:%?20?%;box-shadow:0 %?6?% %?20?% rgba(0,0,0,.06)}.review-header[data-v-12e2a01a]{display:flex;justify-content:space-between;align-items:center;margin-bottom:%?16?%}.review-title[data-v-12e2a01a]{font-size:%?28?%;color:#333}.review-score[data-v-12e2a01a]{font-size:%?26?%;color:#2979ff;font-weight:600}.score-row[data-v-12e2a01a]{display:flex;flex-wrap:wrap;justify-content:center}.score-dot[data-v-12e2a01a]{width:%?56?%;height:%?56?%;border-radius:50%;background:#f0f0f0;color:#999;font-size:%?22?%;text-align:center;line-height:%?56?%;margin:%?8?%;transition:all .2s}.score-dot.active[data-v-12e2a01a]{background:#2979ff;color:#fff}.submit-area[data-v-12e2a01a]{margin-top:%?40?%}.submit-btn[data-v-12e2a01a]{background:#2979ff;color:#fff;font-size:%?30?%;border-radius:%?16?%}",""]),e.exports=t},c61a:function(e,t,a){"use strict";a.r(t);var i=a("c766"),n=a.n(i);for(var o in i)["default"].indexOf(o)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(o);t["default"]=n.a},c766:function(e,t,a){"use strict";a("6a54");var i=a("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(a("9b1b"));a("aa77"),a("bf0f"),a("2797");var o={data:function(){return{user_name:"",school_id:"",school_name:"",ratingList:[{key:"rating_academic",label:"教学质量",score:0},{key:"rating_teachers",label:"老师水平",score:0},{key:"rating_facilities",label:"校园设施",score:0},{key:"rating_safety",label:"安全管理",score:0},{key:"rating_communication",label:"学校沟通",score:0},{key:"rating_value",label:"性价比",score:0},{key:"rating_meals",label:"餐饮质量",score:0},{key:"rating_international_environment",label:"国际化程度",score:0},{key:"rating_graduation_outcomes",label:"毕业认可度",score:0}]}},onLoad:function(e){var t=uni.getStorageSync("user_info");t&&(this.user_name=t.user_name),e&&(this.school_id=e.school_id,this.school_name=e.school_name)},onShow:function(){},methods:{setScore:function(e,t){var a=this.ratingList.find((function(t){return t.key===e}));a&&(a.score=t)},submitReview:function(){var e=this.ratingList.some((function(e){return e.score>0}));if(e){var t={};this.ratingList.forEach((function(e){t[e.key]=e.score})),uni.showLoading({title:"处理中..."}),uni.request({url:"https://nbmjserver.onrender.com/ms/api/insertMSSchoolReviews",method:"POST",data:(0,n.default)((0,n.default)({user_name:this.user_name,school_id:this.school_id,school_name:this.school_name},t),{},{key:"servermustardseed1768725120528"}),header:{"Content-Type":"application/json",Accept:"application/json"},success:function(e){uni.hideLoading(),console.log(e),console.log(e.data.desc),200===e.data.code?(uni.showToast({title:"评分成功",icon:"success"}),uni.navigateBack({})):uni.showModal({content:e.data.desc||"fail",showCancel:!1})},fail:function(e){uni.hideLoading(),console.log(e),uni.showModal({title:"提示",content:e.errMsg,showCancel:!1})}})}else uni.showToast({title:"请至少选择一项评分",icon:"none"})}}};t.default=o},d262:function(e,t,a){var i=a("3fb3");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var n=a("967d").default;n("31e9f775",i,!0,{sourceMap:!1,shadowMode:!1})},eecb:function(e,t,a){"use strict";var i=a("d262"),n=a.n(i);n.a}}]);